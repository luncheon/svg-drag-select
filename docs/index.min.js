var svgDragSelect=function(){"use strict"
return function(h){var m,e=h.svg,u=[],i=document.createElement("div"),f=i.style
i.className="svg-drag-select-area",f.position="fixed",f.pointerEvents="none"
function r(e){if(void 0!==m){var t=e.clientX,n=e.clientY
f.left=Math.min(m.x,t)+"px",f.top=Math.min(m.y,n)+"px",f.width=Math.abs(m.x-t)+"px",f.height=Math.abs(m.y-n)+"px"
var i=this.getCTM().multiply(this.getScreenCTM().inverse()),r=m.matrixTransform(i),o=r.x,a=r.y,s=DOMPointReadOnly.fromPoint({x:t,y:n}).matrixTransform(i),l=s.x,c=s.y,d=this.createSVGRect()
d.x=Math.min(o,l),d.y=Math.min(a,c),d.width=Math.abs(o-l),d.height=Math.abs(a-c)
var p=Array.prototype.slice.apply(h.intersection?this.getIntersectionList(d,null):this.getEnclosureList(d,null))
if(u.length!==p.length||u.some(function(e){return-1===p.indexOf(e)})){var v=u
u=p,h.onSelect({svg:this,pointerEvent:e,selectedElements:u,previousSelectedElements:v,dragStartClientX:m.x,dragStartClientY:m.y,currentClientX:t,currentClientY:n})}}}function t(e){if(0===e.button){var t=e.clientX,n=e.clientY
m=DOMPointReadOnly.fromPoint({x:t,y:n}),document.body.appendChild(i),this.setPointerCapture(e.pointerId),r.call(this,e)}}function n(e){this.releasePointerCapture(e.pointerId),i.parentElement&&i.parentElement.removeChild(i),m=void 0}return e.addEventListener("pointerdown",t),e.addEventListener("pointermove",r),e.addEventListener("pointerup",n),{cancel:function(){e.removeEventListener("pointerdown",t),e.removeEventListener("pointermove",r),e.removeEventListener("pointerup",n)}}}}()
