var svgDragSelect=function(){"use strict"
var f,a=[SVGCircleElement,SVGEllipseElement,SVGImageElement,SVGLineElement,SVGPathElement,SVGPolygonElement,SVGPolylineElement,SVGRectElement,SVGTextElement,SVGUseElement]
try{var e=Object.defineProperty({},"passive",{get:function(){f={passive:!1}}}),t=function(){}
addEventListener("t",t,e),removeEventListener("t",t,e)}catch(e){}function r(e,t,n,r,i,o){var l=e.createSVGPoint()
l.x=n,l.y=r
var a=l.matrixTransform(t),c=a.x,s=a.y
l.x+=i,l.y+=o
var u=l.matrixTransform(t),d=u.x,v=u.y,h=e.createSVGRect()
return h.x=Math.min(c,d),h.y=Math.min(s,v),h.width=Math.abs(c-d),h.height=Math.abs(s-v),h}function E(e,t){return r(e,e.getScreenCTM().inverse(),t.left,t.top,t.width,t.height)}function y(e,t){var n=e.getCTM()
return n?r(e,n,t.x,t.y,t.width,t.height):t}function i(e,t,n){var r=[]
return c(r,e,t||e,n),r}function l(e,t,n){return t<=e&&e<=n}var c=function(e,t,n,r){for(var i=n.firstElementChild;i;i=i.nextElementSibling)if(i instanceof SVGGElement)c(e,t,i,r)
else for(var o=0,l=a;o<l.length;o++){i instanceof l[o]&&r(i)&&e.push(i)}},S=SVGSVGElement.prototype.getEnclosureList?function(e,t,n,r){return function(){return Array.prototype.slice.call(e.getEnclosureList(r,t))}}:function(e,t,n){return function(){return i(e,t,function(e){return function(e,t){var n=e.x,r=n+e.width,i=e.y,o=i+e.height
return l(t.x,n,r)&&l(t.x+t.width,n,r)&&l(t.y,i,o)&&l(t.y+t.height,i,o)}(n,e.getBBox())})}},x=SVGSVGElement.prototype.getIntersectionList?function(e,t,n,r){return function(){return Array.prototype.slice.call(e.getIntersectionList(r,t))}}:function(e,t,n){return function(){return i(e,t,function(e){return function(e,t){var n=e.x,r=n+e.width,i=e.y,o=i+e.height
return(l(t.x,n,r)||l(t.x+t.width,n,r)||l(n,t.x,t.x+t.width))&&(l(t.y,i,o)||l(t.y+t.height,i,o)||l(i,t.y,t.y+t.height))}(n,e.getBBox())})}}
return function(a){function c(e){var t=o+u-document.documentElement.scrollLeft-document.body.scrollLeft,n=l+d-document.documentElement.scrollTop-document.body.scrollTop,r=e.clientX,i=e.clientY
return new DOMRect(Math.min(t,r),Math.min(n,i),Math.abs(t-r),Math.abs(n-i))}var s,o,l,u,d,v=[],e=document.body.appendChild(document.createElement("div")),h=e.style
e.className="svg-drag-select-area-overlay",h.position="fixed",h.pointerEvents="none"
function i(e){if(e.pointerId===s){"pointermove"===e.type&&"touch"===e.pointerType&&e.preventDefault()
var t=c(e),n=E(this,t),r=y(this,n),i=a.referenceElement||null,o="function"==typeof a.selector?a.selector({svg:this,referenceElement:i,pointerEvent:e,dragAreaInClientCoordinate:t,dragAreaInSvgCoordinate:n,dragAreaInInitialSvgCoordinate:r,getEnclosures:S(this,i,n,r),getIntersections:x(this,i,n,r)}):("intersection"===a.selector?x:S)(this,i,n,r)()
if(h.left=t.x+"px",h.top=t.y+"px",h.width=t.width+"px",h.height=t.height+"px",v.length!==o.length||v.some(function(e){return-1===o.indexOf(e)})){var l=v
v=o,a.onSelectionChange&&a.onSelectionChange({svg:this,referenceElement:i,pointerEvent:e,dragAreaInClientCoordinate:t,dragAreaInSvgCoordinate:n,dragAreaInInitialSvgCoordinate:r,selectedElements:v,previousSelectedElements:l})}}}function t(e){var t
e.isPrimary&&void 0===s&&(a.onSelectionStart&&a.onSelectionStart({svg:this,referenceElement:a.referenceElement||null,pointerEvent:e,cancel:function(){return t=!0}}),t||(s=e.pointerId,o=e.clientX,l=e.clientY,u=document.documentElement.scrollLeft+document.body.scrollLeft,d=document.documentElement.scrollTop+document.body.scrollTop,i.call(this,e),h.display="",this.addEventListener("pointermove",i,"touch"===e.pointerType?f:void 0),this.setPointerCapture(s)))}function n(e){if(e.pointerId===s){this.releasePointerCapture(s),this.removeEventListener("pointermove",i),s=void 0,h.display="none"
var t=c(e),n=E(this,t),r=y(this,n)
a.onSelectionEnd&&a.onSelectionEnd({svg:this,referenceElement:a.referenceElement||null,pointerEvent:e,dragAreaInClientCoordinate:t,dragAreaInSvgCoordinate:n,dragAreaInInitialSvgCoordinate:r,selectedElements:v})}}var r=a.svg,m=r.getAttribute("draggable"),p=r.style.pointerEvents,g=r.style.touchAction
return r.style.pointerEvents="all",r.style.touchAction="pinch-zoom",r.setAttribute("draggable","false"),r.addEventListener("pointerdown",t),r.addEventListener("pointerup",n),r.addEventListener("pointercancel",n),{dragAreaOverlay:e,cancel:function(){null===m?r.removeAttribute("draggable"):r.setAttribute("draggable",m),r.style.pointerEvents=p,r.style.touchAction=g,r.removeEventListener("pointerdown",t),r.removeEventListener("pointerup",n),r.removeEventListener("pointermove",i),r.removeEventListener("pointercancel",n),e.parentElement&&e.parentElement.removeChild(e)}}}}()
