var svgDragSelect=function(){"use strict"
var h
try{var e=Object.defineProperty({},"passive",{get:function(){h={passive:!1}}}),t=function(){}
addEventListener("passive",t,e),removeEventListener("passive",t,e)}catch(e){}function r(e,t,n){var r=[]
return s(r,e,t||e,n),r}function l(e,t,n){return t<=e&&e<=n}function i(e,t,n){return r(e,t,function(e){return function(e,t){var n=e.x,r=n+e.width,i=e.y,o=i+e.height
return l(t.x,n,r)&&l(t.x+t.width,n,r)&&l(t.y,i,o)&&l(t.y+t.height,i,o)}(n,e.getBBox())})}function o(e,t,n){return r(e,t,function(e){return function(e,t){var n=e.x,r=n+e.width,i=e.y,o=i+e.height
return(l(t.x,n,r)||l(t.x+t.width,n,r)||l(n,t.x,t.x+t.width))&&(l(t.y,i,o)||l(t.y+t.height,i,o)||l(i,t.y,t.y+t.height))}(n,e.getBBox())})}function f(e,t,n,r,i){var o=e.createSVGRect()
return o.x=Math.min(t,r),o.y=Math.min(n,i),o.width=Math.abs(t-r),o.height=Math.abs(n-i),o}function c(e,t,n){var r=e.createSVGPoint()
r.x=n.x,r.y=n.y
var i=r.matrixTransform(t)
r.x+=n.width,r.y+=n.height
var o=r.matrixTransform(t)
return f(e,i.x,i.y,o.x,o.y)}function g(e,t){return c(e,e.getScreenCTM().inverse(),t)}function E(e,t){var n=e.getCTM()
return n?c(e,n,t):t}var a=[SVGCircleElement,SVGEllipseElement,SVGImageElement,SVGLineElement,SVGPathElement,SVGPolygonElement,SVGPolylineElement,SVGRectElement,SVGTextElement,SVGUseElement],s=function(e,t,n,r){for(var i=n.firstElementChild;i;i=i.nextElementSibling)if(i instanceof SVGGElement)s(e,t,i,r)
else for(var o=0,l=a;o<l.length;o++){i instanceof l[o]&&r(i)&&e.push(i)}},y=SVGSVGElement.prototype.getEnclosureList?function(e,t,n,r){return function(){return Array.prototype.slice.call(e.getEnclosureList(r,t))}}:function(e,t,n){return function(){return i(e,t,n)}},S=SVGSVGElement.prototype.getIntersectionList?function(e,t,n,r){return function(){return Array.prototype.slice.call(e.getIntersectionList(r,t))}}:function(e,t,n){return function(){return o(e,t,n)}}
return function(c){function a(e){return f(t,n-document.documentElement.scrollLeft-document.body.scrollLeft,r-document.documentElement.scrollTop-document.body.scrollTop,e.clientX,e.clientY)}var s,n,r,t=c.svg,u=[],e=document.body.appendChild(document.createElement("div")),d=e.style
e.className="svg-drag-select-area-overlay",d.position="fixed",d.pointerEvents="none"
function i(e){if(e.pointerId===s){"pointermove"===e.type&&"touch"===e.pointerType&&e.preventDefault()
var t=a(e),n=g(this,t),r=E(this,n),i=c.referenceElement||null,o="function"==typeof c.selector?c.selector({svg:this,referenceElement:i,pointerEvent:e,dragAreaInClientCoordinate:t,dragAreaInSvgCoordinate:n,dragAreaInInitialSvgCoordinate:r,getEnclosures:y(this,i,n,r),getIntersections:S(this,i,n,r)}):("intersection"===c.selector?S:y)(this,i,n,r)()
if(d.left=t.x+"px",d.top=t.y+"px",d.width=t.width+"px",d.height=t.height+"px",u.length!==o.length||u.some(function(e){return-1===o.indexOf(e)})){var l=u
u=o,c.onSelectionChange&&c.onSelectionChange({svg:this,referenceElement:i,pointerEvent:e,dragAreaInClientCoordinate:t,dragAreaInSvgCoordinate:n,dragAreaInInitialSvgCoordinate:r,selectedElements:u,previousSelectedElements:l})}}}function o(e){var t
e.isPrimary&&void 0===s&&(c.onSelectionStart&&c.onSelectionStart({svg:this,referenceElement:c.referenceElement||null,pointerEvent:e,cancel:function(){return t=!0}}),t||(s=e.pointerId,n=e.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,r=e.clientY+document.documentElement.scrollTop+document.body.scrollTop,i.call(this,e),d.display="",this.addEventListener("pointermove",i,"touch"===e.pointerType?h:void 0),this.setPointerCapture(s)))}function l(e){if(e.pointerId===s){this.releasePointerCapture(s),this.removeEventListener("pointermove",i),s=void 0,d.display="none"
var t=a(e),n=g(this,t),r=E(this,n)
c.onSelectionEnd&&c.onSelectionEnd({svg:this,referenceElement:c.referenceElement||null,pointerEvent:e,dragAreaInClientCoordinate:t,dragAreaInSvgCoordinate:n,dragAreaInInitialSvgCoordinate:r,selectedElements:u})}}var v=t.getAttribute("draggable"),m=t.style.pointerEvents,p=t.style.touchAction
return t.style.pointerEvents="all",t.style.touchAction="pinch-zoom",t.setAttribute("draggable","false"),t.addEventListener("pointerdown",o),t.addEventListener("pointerup",l),t.addEventListener("pointercancel",l),{dragAreaOverlay:e,cancel:function(){null===v?t.removeAttribute("draggable"):t.setAttribute("draggable",v),t.style.pointerEvents=m,t.style.touchAction=p,t.removeEventListener("pointerdown",o),t.removeEventListener("pointerup",l),t.removeEventListener("pointermove",i),t.removeEventListener("pointercancel",l),e.parentElement&&e.parentElement.removeChild(e)}}}}()
