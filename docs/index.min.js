var svgDragSelect=function(){"use strict"
return function(h){var m,e=h.svg,u=[],t=document.body.appendChild(document.createElement("div")),y=t.style
t.className=h.dragAreaOverlayClass||"svg-drag-select-area",y.position="fixed",y.pointerEvents="none"
function i(e){if(void 0!==m){var t=e.clientX,n=e.clientY
y.left=Math.min(m.x,t)+"px",y.top=Math.min(m.y,n)+"px",y.width=Math.abs(m.x-t)+"px",y.height=Math.abs(m.y-n)+"px"
var i=this.getCTM().multiply(this.getScreenCTM().inverse()),r=m.matrixTransform(i),a=r.x,o=r.y,s=DOMPointReadOnly.fromPoint({x:t,y:n}).matrixTransform(i),l=s.x,d=s.y,c=this.createSVGRect()
c.x=Math.min(a,l),c.y=Math.min(o,d),c.width=Math.abs(a-l),c.height=Math.abs(o-d)
var p=Array.prototype.slice.apply(h.intersection?this.getIntersectionList(c,null):this.getEnclosureList(c,null))
if(u.length!==p.length||u.some(function(e){return-1===p.indexOf(e)})){var v=u
u=p,h.onSelect({svg:this,pointerEvent:e,selectedElements:u,previousSelectedElements:v,dragStartClientX:m.x,dragStartClientY:m.y,currentClientX:t,currentClientY:n})}}}function n(e){if(0===e.button){var t=e.clientX,n=e.clientY
m=DOMPointReadOnly.fromPoint({x:t,y:n}),y.display="",this.setPointerCapture(e.pointerId),i.call(this,e)}}function r(e){this.releasePointerCapture(e.pointerId),y.display="none",m=void 0}return e.addEventListener("pointerdown",n),e.addEventListener("pointermove",i),e.addEventListener("pointerup",r),{dragAreaOverlay:t,cancel:function(){e.removeEventListener("pointerdown",n),e.removeEventListener("pointermove",i),e.removeEventListener("pointerup",r),t.parentElement&&t.parentElement.removeChild(t)}}}}()
